Bech32 地址并不是比特币用户第一次改变地址格式。在 2012 年 4 月，P2SH 地址（以 `3` 开头）被引入，并最终在大约 25% 的交易输出中得到使用。本周，我们将查看这两种不同地址格式的相对采用速度。由于我们稍后将描述的原因，这不能算作一个完全公平的比较，但它可以为我们提供一个大致的指导，看看我们在 Bech32 采用方面迄今为止的表现如何。

我们首先来看一下从每个提案在主网激活的那一天起，发送到 P2SH 或原生 Segwit（Bech32）地址的每个区块的输出百分比。本节中的所有图表均以 30 天的简单移动平均值计算。我们还将 P2SH 图表中的数据点限制在 Segwit 激活前约两个月，以便几乎没有 P2SH 包裹的 Segwit 输出被误算为传统 P2SH。

![P2SH 采用速度与原生 Segwit 的比较。Segwit 线是 P2WPKH 和 P2WSH 的总和](/img/posts/2019-06-p2sh-vs-segwit-aggregate.png)

上图中有一个特别不公平的方面是，P2SH 主要对高级脚本（如多重签名）有用。对于使用单签名地址（以 `1` 开头）的人来说，没有必要也没有好处升级到 P2SH。相比之下，原生 Segwit 地址既有针对单签名用户的（P2WPKH），也有针对高级脚本用户的（P2WSH）。为了使这种比较更加公平，下图在较小的日期范围内将原生 Segwit 的两种用途分开，这样您可以将 Bech32 P2WSH 的使用与其大致相当的 P2SH 进行比较。

![P2SH 采用速度与原生 Segwit 的比较。分别展示 P2WPKH 和 P2WSH 的数据](/img/posts/2019-06-p2sh-vs-segwit-separate.png)

值得注意的是，到目前为止，几乎所有原生 Segwit 地址的使用都集中在单签名的 P2WPKH 上。Segwit 激活前的 P2SH 活动曾达到所有输出的 25% 的峰值，但这些活动并没有迁移到原生 P2WSH 输出。事实上，当我们考虑到所有闪电网络（LN）的存款交易（以及至少一些其他链上 LN 交易）都在使用原生 P2WSH 输出时，似乎几乎没有 2017 年末的 P2SH 活动转移到 P2WSH。

这也指出了使不同地址数据难以比较的另一个方面：使用传统 P2SH 所能实现的所有功能，也都可以使用 P2SH 包裹的 Segwit 地址或原生 P2WSH 地址来实现。P2SH 包裹的 Segwit 地址具有向后兼容性，并且可以[显著减少交易费用][bech32 fees]，而 Bech32 地址与旧钱包不兼容，与 P2SH 包裹的 Segwit 相比，仅能节省一小部分固定的额外费用。这可能使高级脚本用户在短期内没有足够的动力从 P2SH 包裹的 Segwit 地址切换到原生 Segwit 地址。

总体来看，图表似乎表明 P2SH 地址花了大约三年的时间才真正开始普及，而 Bech32 地址在 Segwit 软分叉激活后仅几个月内就已经取得了成功。随着一些钱包已经默认采用 Bech32，更多钱包计划在未来几个月内也将如此，我们预计在 2019 年底前会看到采用率的进一步提高。

[bech32 fees]: /zh/newsletters/2019/04/16/#bech32-发送支持
